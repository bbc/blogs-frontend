{% extends 'blogs_base.html.twig' %}

{% block title %}BBC {{ tr('page_title_blogs') }} - {{ blog.getName() }} - {{ author.getName() }}{% endblock %}

{% block social_tags %}
    <meta property="og:title" content="{{ block('title') }}">
    <meta property="og:url" content="{{ url('author_show', {blogId: blog.getId(), guid: author.getGuid()}) }}" />
{% endblock %}

{% block social_image_tags %}
    {%- if author.getImage() -%}
        <meta property="og:image" content="{{ author.getImage().getUrl(1200,675) }}" />
    {%- else -%}
        {{ parent() }}
    {%- endif -%}
{% endblock %}

{% block social_description %}
    {%- if author.getRole() -%}
        <meta property="og:description" content="{{ author.getRole() }}{% if author.getDescription() %}, {{ author.getDescription() }}{% endif %}"/>
    {%- endif -%}
{% endblock %}

{% block content %}
    <div class="islet br-box-subtle component text--right">
        <a data-istats-link-location="blogs_author_page_see_all_authors"
           href="{{ path('author_index', {blogId: blog.getId()}) }}">{{ tr('link_see_all_authors') }}</a>
    </div>
    <div class="component component--lined br-keyline">
        <div class="grid-wrapper">
            <div class="grid 1/3">
                {{ ds('image', author.getImage(), 160, {}) }}
            </div>
            <div class="grid 2/3">
                <h1 class="no-margin">{{ author.getName() }}</h1>
                <p>
                    {%- if author.getRole() -%}
                        <strong>{{ author.getRole() }}</strong>
                        {%- if author.getDescription() -%}
                            , {{ author.getDescription() }}
                        {%- endif -%}
                    {%- endif -%}
                </p>

                {%- if postResult.getTotal() -%}
                    <p class="no-margin text--shout">
                        <strong>
                            {{- tr('blog_post_count_author', postResult.getTotal()) -}}
                        </strong>
                    </p>
                {%- endif -%}
            </div>
        </div>
    </div>
    <div class="component">
        <h2>{{ tr('header_posts') }}</h2>
        {% if postResult.getDomainModels() is empty %}
            <p>{{ tr('no_results') }}</p>
        {% else %}

        {#$keysForComments = array();#}
        <ol class="list-unstyled list-lined">
            {% for post in postResult.getDomainModels() %}
                {#$keysForComments[] = $post->getForumId($this->blog);#}
                <li class="br-keyline">
                    {{ ds('postSummary', blog, post, {'h_tag': 3, 'show_author': false}) }}
                </li>
            {% endfor %}
        </ol>
        {#<?=$this->commentCountScript($keysForComments);?>#}
        {% endif %}
    </div>
    {% if paginatorPresenter %}
        {{ ds_presenter(paginatorPresenter) }}
    {% endif %}
{% endblock %}
